{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrderDetails=_ref=>{let{orders}=_ref;const[filterType,setFilterType]=useState('all');const[sortBy,setSortBy]=useState('date');const[sortOrder,setSortOrder]=useState('desc');const calculateProfit=(selling,cost)=>{const sellingPrice=Number(selling);const costPrice=Number(cost);const commission=sellingPrice*0.05;return sellingPrice-costPrice-commission;};const formatDate=timestamp=>{try{let date;if(timestamp!==null&&timestamp!==void 0&&timestamp.seconds){date=new Date(timestamp.seconds*1000);}else if(timestamp!==null&&timestamp!==void 0&&timestamp._seconds){date=new Date(timestamp._seconds*1000);}else if(timestamp instanceof Date){date=timestamp;}else{return'تاريخ غير صالح';}return date.toLocaleString('ar-SA');}catch(error){console.error(\"Error formatting date:\",error);return'تاريخ غير صالح';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"orders-details-container\",style:{background:'white',borderRadius:'15px',padding:window.innerWidth<768?'15px 10px':'20px',marginTop:'20px',boxShadow:'0 2px 10px rgba(0,0,0,0.05)',overflowX:'auto'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",style:{display:'flex',flexDirection:'column',alignItems:'center',gap:'15px',marginBottom:'20px',width:'100%',padding:window.innerWidth<768?'0 10px':'0',boxSizing:'border-box'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:window.innerWidth<768?'1rem':'1.2rem',textAlign:'center',width:'100%'},children:\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0637\\u0644\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",style:{display:'flex',flexDirection:window.innerWidth<768?'row':'row',gap:'10px',width:'100%',maxWidth:window.innerWidth<768?'360px':'none',// تحديد العرض الأقصى للموبايل\njustifyContent:'center',flexWrap:'wrap',margin:'0 auto'// توسيط مجموعة الأزرار\n},children:[/*#__PURE__*/_jsxs(\"select\",{value:filterType,onChange:e=>setFilterType(e.target.value),style:{padding:'8px 12px',borderRadius:'8px',border:'1.5px solid #e0e0fe',fontFamily:'Tajawal',width:window.innerWidth<768?'calc(50% - 5px)':'auto',minWidth:window.innerWidth<768?'0':'140px',flex:window.innerWidth<768?'1':'0'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0637\\u0644\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"games\",children:\"\\u0627\\u0644\\u0623\\u0644\\u0639\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"option\",{value:\"subscriptions\",children:\"\\u0627\\u0644\\u0627\\u0634\\u062A\\u0631\\u0627\\u0643\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"services\",children:\"\\u0627\\u0644\\u062E\\u062F\\u0645\\u0627\\u062A\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),style:{padding:'8px 12px',borderRadius:'8px',border:'1.5px solid #e0e0fe',fontFamily:'Tajawal',width:window.innerWidth<768?'calc(50% - 5px)':'auto',minWidth:window.innerWidth<768?'0':'140px',flex:window.innerWidth<768?'1':'0'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"date\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u062A\\u0633\\u062C\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"profit\",children:\"\\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSortOrder(prev=>prev==='asc'?'desc':'asc'),style:{padding:'8px 12px',borderRadius:'8px',border:'none',background:'#f0f2ff',cursor:'pointer',width:window.innerWidth<768?'100%':'48px',marginTop:window.innerWidth<768?'5px':'0'},children:sortOrder==='asc'?'⬆️':'⬇️'})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto',maxHeight:window.innerWidth<768?'calc(100vh - 400px)':'none',overflowY:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'separate',borderSpacing:'0 8px',fontSize:window.innerWidth<768?'0.8rem':'1rem'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u062A\\u0643\\u0644\\u0641\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0627\\u0644\\u0639\\u0645\\u0648\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'center'},children:\"\\u0627\\u0644\\u062E\\u064A\\u0627\\u0631\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders===null||orders===void 0?void 0:orders.filter(order=>filterType==='all'?true:order.serviceType===filterType).sort((a,b)=>{const sortModifier=sortOrder==='asc'?1:-1;switch(sortBy){case'date':return sortModifier*(b.timestamp.seconds-a.timestamp.seconds);case'profit':return sortModifier*(calculateProfit(b.sellingPrice,b.costPrice)-calculateProfit(a.sellingPrice,a.costPrice));case'price':return sortModifier*(Number(b.sellingPrice)-Number(a.sellingPrice));default:return 0;}}).map((order,index)=>/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#fff',borderBottom:'1px solid #f0f0f0'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px'},children:index+1}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px'},children:order.productName}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',borderRadius:'6px',fontSize:'0.85rem',backgroundColor:order.serviceType==='games'?'rgba(76, 175, 80, 0.1)':order.serviceType==='subscriptions'?'rgba(33, 150, 243, 0.1)':'rgba(255, 152, 0, 0.1)',color:order.serviceType==='games'?'#4CAF50':order.serviceType==='subscriptions'?'#2196F3':'#FF9800'},children:order.serviceType==='games'?'ألعاب':order.serviceType==='subscriptions'?'اشتراكات':'خدمات'})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px'},children:formatDate(order.timestamp)}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px'},children:[Number(order.costPrice).toLocaleString(),\" \\u062F.\\u0639\"]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px'},children:[Number(order.sellingPrice).toLocaleString(),\" \\u062F.\\u0639\"]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px'},children:[(Number(order.sellingPrice)*0.05).toLocaleString(),\" \\u062F.\\u0639\"]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px',color:calculateProfit(order.sellingPrice,order.costPrice)>0?'#4CAF50':'#dc3545'},children:[calculateProfit(order.sellingPrice,order.costPrice).toLocaleString(),\" \\u062F.\\u0639\"]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px',display:'flex',gap:'8px',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{style:{border:'none',background:'none',cursor:'pointer'},title:\"\\u062A\\u0639\\u062F\\u064A\\u0644\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{style:{border:'none',background:'none',cursor:'pointer'},title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{style:{border:'none',background:'none',cursor:'pointer'},title:\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0625\\u064A\\u0635\\u0627\\u0644\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"button\",{style:{border:'none',background:'none',cursor:'pointer'},title:\"\\u0623\\u0631\\u0634\\u0641\\u0629\",children:\"\\uD83D\\uDCE6\"})]})]},order.id||index))})]})})]});};export default OrderDetails;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}