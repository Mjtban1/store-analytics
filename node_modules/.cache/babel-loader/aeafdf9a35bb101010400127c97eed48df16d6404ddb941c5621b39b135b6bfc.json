{"ast":null,"code":"import React from'react';import{Chart as ChartJS,ArcElement,Tooltip,Legend,Title}from'chart.js';import{Doughnut}from'react-chartjs-2';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";ChartJS.register(ArcElement,Tooltip,Legend,Title);const OrderTypesChart=_ref=>{let{analytics,orders}=_ref;if(!analytics||!analytics.ordersByType){return/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0644\\u0644\\u0639\\u0631\\u0636\"});}// تحليل البيانات المفصلة\nconst detailedData=orders===null||orders===void 0?void 0:orders.reduce((acc,order)=>{const type=order.serviceType;const subType=order.subType;if(!acc[type]){acc[type]={count:0,revenue:0,subTypes:{}};}acc[type].count++;acc[type].revenue+=Number(order.sellingPrice);if(!acc[type].subTypes[subType]){acc[type].subTypes[subType]={count:0,revenue:0};}acc[type].subTypes[subType].count++;acc[type].subTypes[subType].revenue+=Number(order.sellingPrice);return acc;},{});const typeColors={games:{main:'rgba(75, 192, 192, 0.8)',border:'rgba(75, 192, 192, 1)',text:'#2d9999'},subscriptions:{main:'rgba(153, 102, 255, 0.8)',border:'rgba(153, 102, 255, 1)',text:'#6c42c1'},services:{main:'rgba(255, 159, 64, 0.8)',border:'rgba(255, 159, 64, 1)',text:'#d67e18'}};const chartData={labels:['الألعاب','الاشتراكات','الخدمات'],datasets:[{data:[analytics.ordersByType.games||0,analytics.ordersByType.subscriptions||0,analytics.ordersByType.services||0],backgroundColor:Object.values(typeColors).map(c=>c.main),borderColor:Object.values(typeColors).map(c=>c.border),borderWidth:2,spacing:5,borderRadius:3,hoverOffset:15}]};const options={responsive:true,maintainAspectRatio:false,layout:{padding:20},plugins:{legend:{position:'right',rtl:true,labels:{font:{family:'Tajawal',size:14,weight:'bold'},padding:20,usePointStyle:true,pointStyle:'circle'}},tooltip:{backgroundColor:'rgba(255, 255, 255, 0.95)',titleColor:'#333',titleFont:{family:'Tajawal',size:14,weight:'bold'},bodyColor:'#666',bodyFont:{family:'Tajawal',size:13},borderColor:'#ddd',borderWidth:1,padding:15,boxPadding:10,displayColors:true,callbacks:{title:items=>{var _detailedData$type;const type=items[0].label==='الألعاب'?'games':items[0].label==='الاشتراكات'?'subscriptions':'services';return`${items[0].label} (${(detailedData===null||detailedData===void 0?void 0:(_detailedData$type=detailedData[type])===null||_detailedData$type===void 0?void 0:_detailedData$type.count)||0} طلب)`;},label:context=>{const type=context.label==='الألعاب'?'games':context.label==='الاشتراكات'?'subscriptions':'services';const data=detailedData===null||detailedData===void 0?void 0:detailedData[type];if(!data)return'';return[`الإيرادات: ${data.revenue.toLocaleString()} د.ع`,`نسبة الطلبات: ${(context.raw/(orders===null||orders===void 0?void 0:orders.length)*100).toFixed(1)}%`];},afterBody:items=>{var _detailedData$type2;const type=items[0].label==='الألعاب'?'games':items[0].label==='الاشتراكات'?'subscriptions':'services';const subTypes=detailedData===null||detailedData===void 0?void 0:(_detailedData$type2=detailedData[type])===null||_detailedData$type2===void 0?void 0:_detailedData$type2.subTypes;if(!subTypes)return[];return['','التفاصيل:',...Object.entries(subTypes).map(_ref2=>{let[name,data]=_ref2;return`${name}: ${data.count} طلب - ${data.revenue.toLocaleString()} د.ع`;})];}}}}};return/*#__PURE__*/_jsxs(\"div\",{style:{height:'400px',position:'relative'},children:[/*#__PURE__*/_jsx(Doughnut,{data:chartData,options:options}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'absolute',top:'50%',left:'50%',transform:'translate(-50%, -50%)',textAlign:'center',fontFamily:'Tajawal',color:'#666'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1.2rem',fontWeight:'bold',marginBottom:'5px'},children:(orders===null||orders===void 0?void 0:orders.length)||0}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.9rem'},children:\"\\u0625\\u062C\\u0645\\u0627\\u0644\\u064A \\u0627\\u0644\\u0637\\u0644\\u0628\\u0627\\u062A\"})]})]});};export default OrderTypesChart;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}