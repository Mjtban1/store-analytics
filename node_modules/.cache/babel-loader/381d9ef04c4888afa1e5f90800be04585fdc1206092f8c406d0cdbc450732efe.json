{"ast":null,"code":"import React,{useState,useEffect}from'react';import{db}from'../../firebase/config';import{collection,getDocs,deleteDoc,doc}from'firebase/firestore';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminPanel=()=>{const[isAuthenticated,setIsAuthenticated]=useState(false);const[password,setPassword]=useState('');const[error,setError]=useState('');const[data,setData]=useState({orders:[],capital:[]});const[loading,setLoading]=useState(true);const[activeTab,setActiveTab]=useState('orders');const handleLogin=e=>{e.preventDefault();if(password==='MJ'){setIsAuthenticated(true);setError('');fetchData();}else{setError('رمز الدخول غير صحيح');}};const fetchData=async()=>{try{const ordersSnapshot=await getDocs(collection(db,'orders'));const capitalSnapshot=await getDocs(collection(db,'capital'));setData({orders:ordersSnapshot.docs.map(doc=>({id:doc.id,...doc.data()})),capital:capitalSnapshot.docs.map(doc=>({id:doc.id,...doc.data()}))});}catch(error){console.error('Error fetching data:',error);}finally{setLoading(false);}};const handleDelete=async(id,collection)=>{if(window.confirm('هل أنت متأكد من حذف هذا العنصر؟')){try{await deleteDoc(doc(db,collection,id));await fetchData();// إعادة تحميل البيانات\n}catch(error){console.error('Error deleting document:',error);}}};if(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"admin-login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login-container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,onChange:e=>setPassword(e.target.value),placeholder:\"\\u0627\\u062F\\u062E\\u0644 \\u0631\\u0645\\u0632 \\u0627\\u0644\\u062F\\u062E\\u0648\\u0644\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u062F\\u062E\\u0648\\u0644\"})]})]})});}if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u062D\\u0645\\u064A\\u0644...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"admin-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0644\\u0648\\u062D\\u0629 \\u0627\\u0644\\u062A\\u062D\\u0643\\u0645\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsAuthenticated(false),className:\"logout-btn\",children:\"\\u062A\\u0633\\u062C\\u064A\\u0644 \\u062E\\u0631\\u0648\\u062C\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"admin-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:`tab-btn ${activeTab==='orders'?'active':''}`,onClick:()=>setActiveTab('orders'),children:\"\\u0627\\u0644\\u0637\\u0644\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"button\",{className:`tab-btn ${activeTab==='capital'?'active':''}`,onClick:()=>setActiveTab('capital'),children:\"\\u0631\\u0623\\u0633 \\u0627\\u0644\\u0645\\u0627\\u0644\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"admin-content\",children:activeTab==='orders'?/*#__PURE__*/_jsxs(\"div\",{className:\"orders-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u0627\\u0644\\u0637\\u0644\\u0628\\u0627\\u062A (\",data.orders.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"data-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u0633\\u0639\\u0631\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.orders.map(order=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:order.productName}),/*#__PURE__*/_jsx(\"td\",{children:order.serviceType}),/*#__PURE__*/_jsx(\"td\",{children:order.sellingPrice}),/*#__PURE__*/_jsx(\"td\",{children:new Date(order.timestamp.seconds*1000).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(order.id,'orders'),className:\"delete-btn\",children:\"\\u062D\\u0630\\u0641\"})})]},order.id))})]})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"capital-section\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\u0631\\u0623\\u0633 \\u0627\\u0644\\u0645\\u0627\\u0644 (\",data.capital.length,\")\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"data-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u0645\\u0628\\u0644\\u063A\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u0645\\u0644\\u0627\\u062D\\u0638\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0627\\u0644\\u0625\\u062C\\u0631\\u0627\\u0621\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:data.capital.map(item=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:item.amount}),/*#__PURE__*/_jsx(\"td\",{children:item.note}),/*#__PURE__*/_jsx(\"td\",{children:new Date(item.date).toLocaleDateString()}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(item.id,'capital'),className:\"delete-btn\",children:\"\\u062D\\u0630\\u0641\"})})]},item.id))})]})})]})})]});};export default AdminPanel;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}