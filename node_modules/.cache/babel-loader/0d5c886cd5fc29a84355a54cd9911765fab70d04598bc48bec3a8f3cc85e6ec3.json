{"ast":null,"code":"import React from'react';import{Chart as ChartJS,CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend}from'chart.js';import{Line}from'react-chartjs-2';import{format}from'date-fns';import{ar}from'date-fns/locale';import{jsx as _jsx}from\"react/jsx-runtime\";ChartJS.register(CategoryScale,LinearScale,PointElement,LineElement,Title,Tooltip,Legend);const RevenueChart=_ref=>{let{orders}=_ref;if(!orders||orders.length===0){return/*#__PURE__*/_jsx(\"div\",{className:\"no-data\",style:{fontFamily:'Tajawal',fontSize:'1.2rem',color:'#666'},children:\"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0644\\u0644\\u0639\\u0631\\u0636\"});}// تجميع الطلبات حسب الساعة\nconst hourlyOrders=orders.reduce((acc,order)=>{const date=new Date(order.timestamp.seconds*1000);const hour=date.getHours();if(!acc[hour]){acc[hour]={totalRevenue:0,totalCost:0,count:0};}acc[hour].totalRevenue+=Number(order.sellingPrice);acc[hour].totalCost+=Number(order.costPrice);acc[hour].count+=1;return acc;},{});// تحويل البيانات إلى تنسيق المخطط\nconst hours=Array.from({length:24},(_,i)=>i);const chartData={labels:hours.map(hour=>`${hour}:00`),datasets:[{label:'الإيرادات',data:hours.map(hour=>{var _hourlyOrders$hour;return((_hourlyOrders$hour=hourlyOrders[hour])===null||_hourlyOrders$hour===void 0?void 0:_hourlyOrders$hour.totalRevenue)||0;}),borderColor:'#4CAF50',backgroundColor:'rgba(76, 175, 80, 0.1)',fill:true,tension:0.4,borderWidth:3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:'#4CAF50',pointBorderColor:'#fff',pointBorderWidth:2,pointHoverBackgroundColor:'#fff',pointHoverBorderColor:'#4CAF50'},{label:'التكاليف',data:hours.map(hour=>{var _hourlyOrders$hour2;return((_hourlyOrders$hour2=hourlyOrders[hour])===null||_hourlyOrders$hour2===void 0?void 0:_hourlyOrders$hour2.totalCost)||0;}),borderColor:'#f44336',backgroundColor:'rgba(244, 67, 54, 0.1)',fill:true,tension:0.4,borderWidth:3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:'#f44336',pointBorderColor:'#fff',pointBorderWidth:2,pointHoverBackgroundColor:'#fff',pointHoverBorderColor:'#f44336'},{label:'عدد الطلبات',data:hours.map(hour=>{var _hourlyOrders$hour3;return((_hourlyOrders$hour3=hourlyOrders[hour])===null||_hourlyOrders$hour3===void 0?void 0:_hourlyOrders$hour3.count)||0;}),borderColor:'#2196F3',backgroundColor:'rgba(33, 150, 243, 0.1)',fill:true,tension:0.4,borderWidth:3,pointRadius:4,pointHoverRadius:6,pointBackgroundColor:'#2196F3',pointBorderColor:'#fff',pointBorderWidth:2,pointHoverBackgroundColor:'#fff',pointHoverBorderColor:'#2196F3',yAxisID:'count'}]};const options={responsive:true,interaction:{mode:'index',intersect:false},plugins:{legend:{position:'top',rtl:true,labels:{font:{family:'Tajawal',size:14,weight:'bold'},padding:20,usePointStyle:true,pointStyle:'circle'}},tooltip:{backgroundColor:'rgba(255, 255, 255, 0.9)',titleColor:'#333',titleFont:{family:'Tajawal',size:14,weight:'bold'},bodyColor:'#666',bodyFont:{family:'Tajawal',size:13},borderColor:'#ddd',borderWidth:1,padding:12,displayColors:true,callbacks:{label:context=>{if(context.datasetIndex===2){return`${context.dataset.label}: ${context.raw} طلب`;}return`${context.dataset.label}: ${context.raw.toLocaleString()} د.ع`;}}}},scales:{x:{grid:{display:false},ticks:{font:{family:'Tajawal',size:12},color:'#666'}},y:{position:'left',min:20000,max:200000,grid:{color:'rgba(0, 0, 0, 0.05)'},ticks:{font:{family:'Tajawal',size:12},color:'#666',callback:value=>`${(value/1000).toFixed(0)}k د.ع`}},count:{position:'right',grid:{display:false},ticks:{font:{family:'Tajawal',size:12},color:'#2196F3',callback:value=>`${value} طلب`}}}};return/*#__PURE__*/_jsx(\"div\",{className:\"chart-wrapper\",style:{padding:'20px'},children:/*#__PURE__*/_jsx(Line,{data:chartData,options:options})});};export default RevenueChart;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}