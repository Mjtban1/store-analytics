{"ast":null,"code":"import React,{useState,useEffect}from'react';import{db}from'../../firebase/config';import{collection,addDoc,getDocs,query,where,deleteDoc,doc}from'firebase/firestore';import{getDeviceId}from'../../utils/deviceId';import{requestNotificationPermission}from'../../utils/notifications';import{sendCustomNotification}from'../../firebase/config';import'./Analytics.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Analytics=()=>{const[name,setName]=useState('');const[savedName,setSavedName]=useState('');const[docId,setDocId]=useState(null);const deviceId=getDeviceId();useEffect(()=>{const fetchName=async()=>{const q=query(collection(db,'users'),where('deviceId','==',deviceId));const querySnapshot=await getDocs(q);querySnapshot.forEach(doc=>{setSavedName(doc.data().name);setDocId(doc.id);});};fetchName();requestNotificationPermission();},[deviceId]);const handleNotification=async()=>{try{await sendCustomNotification(\"âœ¨ ØªØ­ÙŠØ© Ø®Ø§ØµØ© âœ¨\",\"Ù…Ø±Ø­Ø¨Ø§Ù‹ Ø´Ù…ÙˆØ³! Ù†ØªÙ…Ù†Ù‰ Ù„Ùƒ ÙŠÙˆÙ…Ø§Ù‹ Ø³Ø¹ÙŠØ¯Ø§Ù‹! ðŸŒŸ\");}catch(error){console.error(\"Error sending notification:\",error);}};const getWelcomeMessage=name=>{const lowerName=name.toLowerCase();if(['Ø´Ù…Ø³','Ø´Ù…ÙˆØ³','shams','shmoos'].includes(lowerName)){return/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-special shams-animation\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u2728 \\u0634\\u0645\\u0648\\u0633\\u0633\\u0633 \\u0627\\u0644\\u063A\\u0627\\u0644\\u064A \\u0627\\u0647\\u0644\\u0627 \\u2728\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"floating-emojis\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDF1F\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2B50\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCAB\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDF1E\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleNotification,className:\"notification-btn\",children:\"\\u0625\\u0631\\u0633\\u0627\\u0644 \\u062A\\u062D\\u064A\\u0629 \\u062E\\u0627\\u0635\\u0629 \\u2728\"})]});}else if(['Ø¨Ù†ÙŠÙ†','Ø¨Ù†ÙˆÙ†Ù‡','baneen'].includes(lowerName)){return/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-special baneen-animation\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83D\\uDC9D \\u0647\\u0644\\u0627\\u0648\\u0648\\u0648\\u0648 \\u0628\\u0646\\u0648\\u0646\\u0647 \\uD83D\\uDC9D\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"floating-emojis\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDF80\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDC96\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u2728\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83E\\uDD8B\"})]})]});}else if(['Ø¹Ù„ÙŠ','Ø¹Ù„Ù‰','ali'].includes(lowerName)){return/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-special ali-animation\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD83C\\uDF1F \\u0645\\u0631\\u062D\\u0628\\u0627\\u064B \\u0639\\u0644\\u0627\\u0648\\u064A\\u064A\\u064A\\u064A \\uD83C\\uDF1F\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"floating-emojis\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDCAA\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83D\\uDC51\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDF89\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A1\"})]})]});}return/*#__PURE__*/_jsxs(\"h1\",{children:[\"\\u0645\\u0631\\u062D\\u0628\\u0627\\u064B \",name,\"!\"]});};const handleSubmit=async e=>{e.preventDefault();try{const docRef=await addDoc(collection(db,'users'),{name:name,deviceId:deviceId,timestamp:new Date()});setSavedName(name);setDocId(docRef.id);setName('');}catch(error){console.error(\"Error adding name: \",error);}};const handleRemove=async()=>{try{if(docId){await deleteDoc(doc(db,'users',docId));setSavedName('');setDocId(null);}}catch(error){console.error(\"Error removing name: \",error);}};return/*#__PURE__*/_jsx(\"div\",{className:\"analytics-container\",children:!savedName?/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"name-form\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:name,onChange:e=>setName(e.target.value),placeholder:\"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0633\\u0645\\u0643 \\u0647\\u0646\\u0627\",className:\"name-input arabic-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-btn\",children:\"\\u062A\\u0645\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"welcome-container\",children:[getWelcomeMessage(savedName),/*#__PURE__*/_jsx(\"button\",{onClick:handleRemove,className:\"remove-btn\",children:\"\\u0625\\u0632\\u0627\\u0644\\u0629 \\u0627\\u0644\\u0627\\u0633\\u0645\"})]})});};export default Analytics;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}