{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrderDetails=_ref=>{let{orders}=_ref;const[filterType,setFilterType]=useState('all');const[sortBy,setSortBy]=useState('date');const[sortOrder,setSortOrder]=useState('desc');const calculateProfit=(selling,cost)=>{const sellingPrice=Number(selling);const costPrice=Number(cost);const commission=sellingPrice*0.05;return sellingPrice-costPrice-commission;};const formatDate=timestamp=>{try{let date;if(timestamp!==null&&timestamp!==void 0&&timestamp.seconds){date=new Date(timestamp.seconds*1000);}else if(timestamp!==null&&timestamp!==void 0&&timestamp._seconds){date=new Date(timestamp._seconds*1000);}else if(timestamp instanceof Date){date=timestamp;}else{return'تاريخ غير صالح';}return date.toLocaleString('ar-SA');}catch(error){console.error(\"Error formatting date:\",error);return'تاريخ غير صالح';}};const renderAnalyticsStats=()=>{const totalRevenue=(orders===null||orders===void 0?void 0:orders.reduce((sum,order)=>sum+Number(order.sellingPrice),0))||0;const totalCosts=(orders===null||orders===void 0?void 0:orders.reduce((sum,order)=>sum+Number(order.costPrice),0))||0;const profit=totalRevenue-totalCosts;const profitMargin=totalRevenue>0?(profit/totalRevenue*100).toFixed(1):0;const statCards=[{title:'إجمالي الإيرادات',value:`${totalRevenue.toLocaleString()} د.ع`,icon:'💰',secondaryIcon:'📈',gradient:'linear-gradient(135deg, #28c76f, #19a85f)',shadowColor:'rgba(40, 199, 111, 0.35)',particles:['💵','💎','💰'],trend:'+12.5%',trendUp:true,description:'مجموع كل المبيعات'},{title:'إجمالي التكاليف',value:`${totalCosts.toLocaleString()} د.ع`,icon:'💳',secondaryIcon:'📊',gradient:'linear-gradient(135deg, #e83e8c, #d92550)',shadowColor:'rgba(232, 62, 140, 0.35)',particles:['💸','💱','💴'],trend:'-8.3%',trendUp:false,description:'مجموع كل المصروفات'},{title:'صافي الربح',value:`${profit.toLocaleString()} د.ع`,icon:'✨',secondaryIcon:'📱',gradient:'linear-gradient(135deg, #2196F3, #1e88e5)',shadowColor:'rgba(33, 150, 243, 0.35)',particles:['⭐','✨','💫'],trend:'+15.2%',trendUp:true,description:'الأرباح الصافية'},{title:'هامش الربح',value:`${profitMargin}%`,icon:'📊',secondaryIcon:'📈',gradient:'linear-gradient(135deg, #FF9800, #fb8c00)',shadowColor:'rgba(255, 152, 0, 0.35)',particles:['📊','📈','💹'],trend:'+5.7%',trendUp:true,description:'نسبة الربح من المبيعات'}];return/*#__PURE__*/_jsx(\"div\",{className:\"analytics-stats\",style:{display:'grid',gridTemplateColumns:'repeat(auto-fit, minmax(280px, 1fr))',gap:'20px',margin:'20px 0',padding:'0 10px'},children:statCards.map((card,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card-animated\",style:{background:card.gradient,borderRadius:'20px',padding:'25px',color:'white',position:'relative',overflow:'hidden',minHeight:'180px',display:'flex',flexDirection:'column',justifyContent:'space-between',boxShadow:`0 8px 25px ${card.shadowColor}`,transition:'all 0.3s ease',cursor:'pointer'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-pattern\"}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',zIndex:2},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'flex-start',marginBottom:'15px'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{style:{margin:'0 0 5px 0',fontSize:'1.1rem',opacity:'0.9'},children:card.title}),/*#__PURE__*/_jsx(\"p\",{style:{margin:'0',fontSize:'0.85rem',opacity:'0.7'},children:card.description})]}),/*#__PURE__*/_jsx(\"span\",{className:\"card-icon\",style:{fontSize:'2rem',opacity:'0.9'},children:card.icon})]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'2rem',fontWeight:'bold',marginBottom:'10px'},children:card.value}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',alignItems:'center',gap:'8px',fontSize:'0.9rem'},children:[/*#__PURE__*/_jsx(\"span\",{className:`trend-icon ${card.trendUp?'up':'down'}`,children:card.trendUp?'↗':'↘'}),/*#__PURE__*/_jsx(\"span\",{children:card.trend}),/*#__PURE__*/_jsx(\"span\",{style:{opacity:'0.7'},children:\"\\u0645\\u0642\\u0627\\u0631\\u0646\\u0629 \\u0628\\u0627\\u0644\\u0634\\u0647\\u0631 \\u0627\\u0644\\u0633\\u0627\\u0628\\u0642\"})]})]}),card.particles.map((particle,i)=>/*#__PURE__*/_jsx(\"span\",{className:`floating-particle particle-${i}`,style:{position:'absolute',fontSize:'1.2rem',opacity:'0.2'},children:particle},i))]},index))});};return/*#__PURE__*/_jsxs(\"div\",{className:\"orders-details-container\",style:{background:'white',borderRadius:'15px',padding:window.innerWidth<768?'15px 10px':'20px',marginTop:'20px',boxShadow:'0 2px 10px rgba(0,0,0,0.05)',overflowX:'auto'},children:[renderAnalyticsStats(),/*#__PURE__*/_jsxs(\"div\",{className:\"section-header\",style:{display:'flex',flexDirection:'column',alignItems:'center',gap:'15px',marginBottom:window.innerWidth<768?'40px':'20px',// زيادة المسافة في الموبايل\nwidth:'100%',padding:window.innerWidth<768?'0 10px':'0',boxSizing:'border-box'},children:[/*#__PURE__*/_jsx(\"h2\",{style:{fontSize:window.innerWidth<768?'1rem':'1.2rem',textAlign:'center',width:'100%'},children:\"\\u062A\\u0641\\u0627\\u0635\\u064A\\u0644 \\u0627\\u0644\\u0637\\u0644\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"filters\",style:{display:'flex',flexDirection:'column',// تغيير إلى column في الموبايل\ngap:'10px',width:'100%',maxWidth:window.innerWidth<768?'100%':'none',alignItems:'center',marginBottom:window.innerWidth<768?'20px':'0'// إضافة هامش سفلي في الموبايل\n},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'10px',width:'100%',justifyContent:'center',flexWrap:window.innerWidth<768?'wrap':'nowrap'},children:[/*#__PURE__*/_jsxs(\"select\",{value:filterType,onChange:e=>setFilterType(e.target.value),style:{padding:'8px 12px',borderRadius:'8px',border:'1.5px solid #e0e0fe',fontFamily:'Tajawal',width:window.innerWidth<768?'48%':'auto',minWidth:window.innerWidth<768?'0':'140px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",children:\"\\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0637\\u0644\\u0628\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"games\",children:\"\\u0627\\u0644\\u0623\\u0644\\u0639\\u0627\\u0628\"}),/*#__PURE__*/_jsx(\"option\",{value:\"subscriptions\",children:\"\\u0627\\u0644\\u0627\\u0634\\u062A\\u0631\\u0627\\u0643\\u0627\\u062A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"services\",children:\"\\u0627\\u0644\\u062E\\u062F\\u0645\\u0627\\u062A\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),style:{padding:'8px 12px',borderRadius:'8px',border:'1.5px solid #e0e0fe',fontFamily:'Tajawal',width:window.innerWidth<768?'48%':'auto',minWidth:window.innerWidth<768?'0':'140px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"date\",children:\"\\u062A\\u0627\\u0631\\u064A\\u062E \\u0627\\u0644\\u062A\\u0633\\u062C\\u064A\\u0644\"}),/*#__PURE__*/_jsx(\"option\",{value:\"profit\",children:\"\\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsx(\"option\",{value:\"price\",children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSortOrder(prev=>prev==='asc'?'desc':'asc'),style:{padding:'8px 12px',borderRadius:'8px',border:'none',background:'#f0f2ff',cursor:'pointer',width:window.innerWidth<768?'100px':'48px',marginTop:window.innerWidth<768?'5px':'0'},children:sortOrder==='asc'?'⬆️':'⬇️'})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto',maxHeight:window.innerWidth<768?'calc(100vh - 450px)':'none',// زيادة المسافة\noverflowY:'auto',marginTop:window.innerWidth<768?'20px':'0'// إضافة مسافة علوية في الموبايل\n},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'separate',borderSpacing:'0 8px',fontSize:window.innerWidth<768?'0.8rem':'1rem'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"#\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0627\\u0644\\u0645\\u0646\\u062A\\u062C\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0627\\u0644\\u0646\\u0648\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0627\\u0644\\u062A\\u0627\\u0631\\u064A\\u062E\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u062A\\u0643\\u0644\\u0641\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0633\\u0639\\u0631 \\u0627\\u0644\\u0628\\u064A\\u0639\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0627\\u0644\\u0639\\u0645\\u0648\\u0644\\u0629\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'right'},children:\"\\u0627\\u0644\\u0631\\u0628\\u062D\"}),/*#__PURE__*/_jsx(\"th\",{style:{padding:'12px',background:'#f8f9ff',textAlign:'center'},children:\"\\u0627\\u0644\\u062E\\u064A\\u0627\\u0631\\u0627\\u062A\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:orders===null||orders===void 0?void 0:orders.filter(order=>filterType==='all'?true:order.serviceType===filterType).sort((a,b)=>{const sortModifier=sortOrder==='asc'?1:-1;switch(sortBy){case'date':return sortModifier*(b.timestamp.seconds-a.timestamp.seconds);case'profit':return sortModifier*(calculateProfit(b.sellingPrice,b.costPrice)-calculateProfit(a.sellingPrice,a.costPrice));case'price':return sortModifier*(Number(b.sellingPrice)-Number(a.sellingPrice));default:return 0;}}).map((order,index)=>/*#__PURE__*/_jsxs(\"tr\",{style:{background:'#fff',borderBottom:'1px solid #f0f0f0'},children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px'},children:index+1}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px'},children:order.productName}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px'},children:/*#__PURE__*/_jsx(\"span\",{style:{padding:'4px 8px',borderRadius:'6px',fontSize:'0.85rem',backgroundColor:order.serviceType==='games'?'rgba(76, 175, 80, 0.1)':order.serviceType==='subscriptions'?'rgba(33, 150, 243, 0.1)':'rgba(255, 152, 0, 0.1)',color:order.serviceType==='games'?'#4CAF50':order.serviceType==='subscriptions'?'#2196F3':'#FF9800'},children:order.serviceType==='games'?'ألعاب':order.serviceType==='subscriptions'?'اشتراكات':'خدمات'})}),/*#__PURE__*/_jsx(\"td\",{style:{padding:'12px'},children:formatDate(order.timestamp)}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px'},children:[Number(order.costPrice).toLocaleString(),\" \\u062F.\\u0639\"]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px'},children:[Number(order.sellingPrice).toLocaleString(),\" \\u062F.\\u0639\"]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px'},children:[(Number(order.sellingPrice)*0.05).toLocaleString(),\" \\u062F.\\u0639\"]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px',color:calculateProfit(order.sellingPrice,order.costPrice)>0?'#4CAF50':'#dc3545'},children:[calculateProfit(order.sellingPrice,order.costPrice).toLocaleString(),\" \\u062F.\\u0639\"]}),/*#__PURE__*/_jsxs(\"td\",{style:{padding:'12px',display:'flex',gap:'8px',justifyContent:'center'},children:[/*#__PURE__*/_jsx(\"button\",{style:{border:'none',background:'none',cursor:'pointer'},title:\"\\u062A\\u0639\\u062F\\u064A\\u0644\",children:\"\\u270F\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{style:{border:'none',background:'none',cursor:'pointer'},title:\"\\u062D\\u0630\\u0641\",children:\"\\uD83D\\uDDD1\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{style:{border:'none',background:'none',cursor:'pointer'},title:\"\\u0625\\u0646\\u0634\\u0627\\u0621 \\u0625\\u064A\\u0635\\u0627\\u0644\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"button\",{style:{border:'none',background:'none',cursor:'pointer'},title:\"\\u0623\\u0631\\u0634\\u0641\\u0629\",children:\"\\uD83D\\uDCE6\"})]})]},order.id||index))})]})})]});};// إضافة الأنماط المتحركة\nconst styles=`\n.stat-card-animated {\n    animation: cardAppear 0.5s ease-out;\n}\n\n.stat-card-animated:hover {\n    transform: translateY(-5px);\n}\n\n.card-pattern {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-image: linear-gradient(45deg, rgba(255,255,255,0.1) 25%, transparent 25%),\n                      linear-gradient(-45deg, rgba(255,255,255,0.1) 25%, transparent 25%),\n                      linear-gradient(45deg, transparent 75%, rgba(255,255,255,0.1) 75%),\n                      linear-gradient(-45deg, transparent 75%, rgba(255,255,255,0.1) 75%);\n    background-size: 20px 20px;\n    background-position: 0 0, 0 10px, 10px -10px, -10px 0px;\n    animation: patternMove 20s linear infinite;\n    opacity: 0.1;\n}\n\n.card-icon {\n    animation: iconFloat 3s ease-in-out infinite;\n}\n\n.floating-particle {\n    animation: particleFloat 4s ease-in-out infinite;\n}\n\n.particle-0 { top: 20%; right: 10%; animation-delay: 0s; }\n.particle-1 { top: 60%; right: 20%; animation-delay: 1s; }\n.particle-2 { top: 40%; right: 30%; animation-delay: 2s; }\n\n.trend-icon {\n    font-size: 1.2rem;\n    animation: trendBounce 1s ease-in-out infinite;\n}\n\n.trend-icon.up { color: #4CAF50; }\n.trend-icon.down { color: #f44336; }\n\n@keyframes cardAppear {\n    from {\n        opacity: 0;\n        transform: translateY(20px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n@keyframes patternMove {\n    from { background-position: 0 0, 0 10px, 10px -10px, -10px 0px; }\n    to { background-position: 20px 20px, 20px 30px, 30px 10px, 10px 20px; }\n}\n\n@keyframes iconFloat {\n    0%, 100% { transform: translateY(0); }\n    50% { transform: translateY(-10px); }\n}\n\n@keyframes particleFloat {\n    0%, 100% { transform: translate(0, 0); opacity: 0.2; }\n    50% { transform: translate(-10px, -10px); opacity: 0.4; }\n}\n\n@keyframes trendBounce {\n    0%, 100% { transform: translateY(0); }\n    50% { transform: translateY(-3px); }\n}\n\n@media (max-width: 768px) {\n    .stat-card-animated {\n        min-height: 160px;\n        padding: 20px;\n    }\n}\n`;const styleSheet=document.createElement('style');styleSheet.textContent=styles;document.head.appendChild(styleSheet);export default OrderDetails;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}